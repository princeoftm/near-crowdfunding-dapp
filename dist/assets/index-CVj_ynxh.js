var Sr=Object.defineProperty;var dt=r=>{throw TypeError(r)};var Er=(r,e,t)=>e in r?Sr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>Er(r,typeof e!="symbol"?e+"":e,t),ht=(r,e,t)=>e.has(r)||dt("Cannot "+t);var R=(r,e,t)=>(ht(r,e,"read from private field"),t?t.call(r):e.get(r)),Y=(r,e,t)=>e.has(r)?dt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),ee=(r,e,t,n)=>(ht(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);function Cr(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function et(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function Ar(r){return new TextEncoder().encode(r)}function Ur(r){return new TextDecoder().decode(r)}function Pr(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=s}var a=r.length,h=r.charAt(0),g=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function C(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var p=0,P=0,y=0,$=c.length;y!==$&&c[y]===0;)y++,p++;for(var x=($-y)*f+1>>>0,w=new Uint8Array(x);y!==$;){for(var S=c[y],z=0,m=x-1;(S!==0||z<P)&&m!==-1;m--,z++)S+=256*w[m]>>>0,w[m]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");P=z,y++}for(var A=x-P;A!==x&&w[A]===0;)A++;for(var L=h.repeat(p);A<x;++A)L+=r.charAt(w[A]);return L}function N(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var p=0;if(c[p]!==" "){for(var P=0,y=0;c[p]===h;)P++,p++;for(var $=(c.length-p)*g+1>>>0,x=new Uint8Array($);c[p];){var w=t[c.charCodeAt(p)];if(w===255)return;for(var S=0,z=$-1;(w!==0||S<y)&&z!==-1;z--,S++)w+=a*x[z]>>>0,x[z]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=S,p++}if(c[p]!==" "){for(var m=$-y;m!==$&&x[m]===0;)m++;for(var A=new Uint8Array(P+($-m)),L=P;m!==$;)A[L++]=x[m++];return A}}}function O(c){var p=N(c);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:C,decodeUnsafe:N,decode:O}}var zr=Pr,Mr=zr;let Tr=class{constructor(e,t,n){d(this,"name");d(this,"prefix");d(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Or=class{constructor(e,t,n){d(this,"name");d(this,"prefix");d(this,"baseDecode");d(this,"prefixCodePoint");this.name=e,this.prefix=t;const s=t.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rt(this,e)}},Ir=class{constructor(e){d(this,"decoders");this.decoders=e}or(e){return Rt(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Rt(r,e){return new Ir({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let Dr=class{constructor(e,t,n,s){d(this,"name");d(this,"prefix");d(this,"baseEncode");d(this,"baseDecode");d(this,"encoder");d(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new Tr(e,t,n),this.decoder=new Or(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function ve({name:r,prefix:e,encode:t,decode:n}){return new Dr(r,e,t,n)}function ce({name:r,prefix:e,alphabet:t}){const{encode:n,decode:s}=Mr(t,r);return ve({prefix:e,name:r,encode:n,decode:o=>et(s(o))})}function Nr(r,e,t,n){const s={};for(let f=0;f<e.length;++f)s[e[f]]=f;let o=r.length;for(;r[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,h=0,g=0;for(let f=0;f<o;++f){const C=s[r[f]];if(C===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|C,a+=t,a>=8&&(a-=8,i[g++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return i}function _r(r,e,t){const n=e[e.length-1]==="=",s=(1<<t)-1;let o="",i=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],i+=8;i>t;)i-=t,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<t-i]),n)for(;o.length*t&7;)o+="=";return o}function M({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return ve({prefix:e,name:r,encode(s){return _r(s,n,t)},decode(s){return Nr(s,n,t,r)}})}const B=ce({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Br=ce({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Fr=Object.freeze(Object.defineProperty({__proto__:null,base58btc:B,base58flickr:Br},Symbol.toStringTag,{value:"Module"})),W=M({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jr=M({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Lr=M({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rr=M({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Vr=M({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kr=M({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qr=M({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wr=M({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Gr=M({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Jr=Object.freeze(Object.defineProperty({__proto__:null,base32:W,base32hex:Vr,base32hexpad:qr,base32hexpadupper:Wr,base32hexupper:kr,base32pad:Lr,base32padupper:Rr,base32upper:jr,base32z:Gr},Symbol.toStringTag,{value:"Module"})),le=ce({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qr=ce({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Xr=Object.freeze(Object.defineProperty({__proto__:null,base36:le,base36upper:Qr},Symbol.toStringTag,{value:"Module"}));var Kr=Vt,lt=128,Zr=-128,Hr=Math.pow(2,31);function Vt(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Hr;)e[t++]=r&255|lt,r/=128;for(;r&Zr;)e[t++]=r&255|lt,r>>>=7;return e[t]=r|0,Vt.bytes=t-n+1,e}var Yr=Fe,en=128,ft=127;function Fe(r,n){var t=0,n=n||0,s=0,o=n,i,a=r.length;do{if(o>=a)throw Fe.bytes=0,new RangeError("Could not decode varint");i=r[o++],t+=s<28?(i&ft)<<s:(i&ft)*Math.pow(2,s),s+=7}while(i>=en);return Fe.bytes=o-n,t}var tn=Math.pow(2,7),rn=Math.pow(2,14),nn=Math.pow(2,21),sn=Math.pow(2,28),on=Math.pow(2,35),an=Math.pow(2,42),cn=Math.pow(2,49),un=Math.pow(2,56),dn=Math.pow(2,63),hn=function(r){return r<tn?1:r<rn?2:r<nn?3:r<sn?4:r<on?5:r<an?6:r<cn?7:r<un?8:r<dn?9:10},ln={encode:Kr,decode:Yr,encodingLength:hn},pe=ln;function je(r,e=0){return[pe.decode(r,e),pe.decode.bytes]}function be(r,e,t=0){return pe.encode(r,e,t),e}function we(r){return pe.encodingLength(r)}function fn(r,e){const t=e.byteLength,n=we(r),s=n+we(t),o=new Uint8Array(s+t);return be(r,o,0),be(t,o,n),o.set(e,s),new tt(r,t,e,o)}function kt(r){const e=et(r),[t,n]=je(e),[s,o]=je(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new tt(t,s,i,e)}function pn(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Cr(r.bytes,t.bytes)}}let tt=class{constructor(e,t,n,s){d(this,"code");d(this,"size");d(this,"digest");d(this,"bytes");this.code=e,this.size=t,this.digest=n,this.bytes=s}};function pt(r,e){const{bytes:t,version:n}=r;switch(n){case 0:return wn(t,Le(r),e??B.encoder);default:return gn(t,Le(r),e??W.encoder)}}const bt=new WeakMap;function Le(r){const e=bt.get(r);if(e==null){const t=new Map;return bt.set(r,t),t}return e}var Ft;let qt=class I{constructor(e,t,n,s){d(this,"code");d(this,"version");d(this,"multihash");d(this,"bytes");d(this,"/");d(this,Ft,"CID");this.code=t,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==te)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==yn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return I.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=fn(e,t);return I.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return I.equals(this,e)}static equals(e,t){const n=t;return n!=null&&e.code===n.code&&e.version===n.version&&pn(e.multihash,n.multihash)}toString(e){return pt(this,e)}toJSON(){return{"/":pt(this)}}link(){return this}[(Ft=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof I)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:s,multihash:o,bytes:i}=t;return new I(n,s,o,i??wt(n,s,o.bytes))}else if(t[mn]===!0){const{version:n,multihash:s,code:o}=t,i=kt(s);return I.create(n,o,i)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==te)throw new Error(`Version 0 CID must use dag-pb (code: ${te}) block encoding`);return new I(e,t,n,n.bytes)}case 1:{const s=wt(e,t,n.bytes);return new I(e,t,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return I.create(0,te,e)}static createV1(e,t){return I.create(1,e,t)}static decode(e){const[t,n]=I.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=I.inspectBytes(e),n=t.size-t.multihashSize,s=et(e.subarray(n,n+t.multihashSize));if(s.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=s.subarray(t.multihashSize-t.digestSize),i=new tt(t.multihashCode,t.digestSize,o,s);return[t.version===0?I.createV0(i):I.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[C,N]=je(e.subarray(t));return t+=N,C};let s=n(),o=te;if(s===18?(s=0,t=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=t,a=n(),h=n(),g=t+h,f=g-i;return{version:s,codec:o,multihashCode:a,digestSize:h,multihashSize:f,size:g}}static parse(e,t){const[n,s]=bn(e,t),o=I.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Le(o).set(n,e),o}};function bn(r,e){switch(r[0]){case"Q":{const t=e??B;return[B.prefix,t.decode(`${B.prefix}${r}`)]}case B.prefix:{const t=e??B;return[B.prefix,t.decode(r)]}case W.prefix:{const t=e??W;return[W.prefix,t.decode(r)]}case le.prefix:{const t=e??le;return[le.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function wn(r,e,t){const{prefix:n}=t;if(n!==B.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const s=e.get(n);if(s==null){const o=t.encode(r).slice(1);return e.set(n,o),o}else return s}function gn(r,e,t){const{prefix:n}=t,s=e.get(n);if(s==null){const o=t.encode(r);return e.set(n,o),o}else return s}const te=112,yn=18;function wt(r,e,t){const n=we(r),s=n+we(e),o=new Uint8Array(s+t.byteLength);return be(r,o,0),be(e,o,n),o.set(t,s),o}const mn=Symbol.for("@ipld/js-cid/CID");function vn(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}const $n=ce({prefix:"9",name:"base10",alphabet:"0123456789"}),xn=Object.freeze(Object.defineProperty({__proto__:null,base10:$n},Symbol.toStringTag,{value:"Module"})),Sn=M({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),En=M({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Cn=Object.freeze(Object.defineProperty({__proto__:null,base16:Sn,base16upper:En},Symbol.toStringTag,{value:"Module"})),An=M({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Un=Object.freeze(Object.defineProperty({__proto__:null,base2:An},Symbol.toStringTag,{value:"Module"})),Wt=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Pn=Wt.reduce((r,e,t)=>(r[t]=e,r),[]),zn=Wt.reduce((r,e,t)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return r[n]=t,r},[]);function Mn(r){return r.reduce((e,t)=>(e+=Pn[t],e),"")}function Tn(r){const e=[];for(const t of r){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const s=zn[n];if(s==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const On=ve({prefix:"🚀",name:"base256emoji",encode:Mn,decode:Tn}),In=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:On},Symbol.toStringTag,{value:"Module"})),Dn=M({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nn=M({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_n=M({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bn=M({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Fn=Object.freeze(Object.defineProperty({__proto__:null,base64:Dn,base64pad:Nn,base64url:_n,base64urlpad:Bn},Symbol.toStringTag,{value:"Module"})),jn=M({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ln=Object.freeze(Object.defineProperty({__proto__:null,base8:jn},Symbol.toStringTag,{value:"Module"})),Rn=ve({prefix:"\0",name:"identity",encode:r=>Ur(r),decode:r=>Ar(r)}),Vn=Object.freeze(Object.defineProperty({__proto__:null,identity:Rn},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Re={...Vn,...Un,...Ln,...xn,...Cn,...Jr,...Xr,...Fr,...Fn,...In};function Gt(r=0){return new Uint8Array(r)}function Jt(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const gt=Jt("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Me=Jt("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Gt(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Qt={utf8:gt,"utf-8":gt,hex:Re.base16,latin1:Me,ascii:Me,binary:Me,...Re};function F(r,e="utf8"){const t=Qt[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}function kn(r=0){return new Uint8Array(r)}const qn=Math.pow(2,7),Wn=Math.pow(2,14),Gn=Math.pow(2,21),rt=Math.pow(2,28),nt=Math.pow(2,35),st=Math.pow(2,42),ot=Math.pow(2,49),b=128,D=127;function q(r){if(r<qn)return 1;if(r<Wn)return 2;if(r<Gn)return 3;if(r<rt)return 4;if(r<nt)return 5;if(r<st)return 6;if(r<ot)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Jn(r,e,t=0){switch(q(r)){case 8:e[t++]=r&255|b,r/=128;case 7:e[t++]=r&255|b,r/=128;case 6:e[t++]=r&255|b,r/=128;case 5:e[t++]=r&255|b,r/=128;case 4:e[t++]=r&255|b,r>>>=7;case 3:e[t++]=r&255|b,r>>>=7;case 2:e[t++]=r&255|b,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function Qn(r,e,t=0){switch(q(r)){case 8:e.set(t++,r&255|b),r/=128;case 7:e.set(t++,r&255|b),r/=128;case 6:e.set(t++,r&255|b),r/=128;case 5:e.set(t++,r&255|b),r/=128;case 4:e.set(t++,r&255|b),r>>>=7;case 3:e.set(t++,r&255|b),r>>>=7;case 2:e.set(t++,r&255|b),r>>>=7;case 1:{e.set(t++,r&255),r>>>=7;break}default:throw new Error("unreachable")}return e}function Xn(r,e){let t=r[e],n=0;if(n+=t&D,t<b||(t=r[e+1],n+=(t&D)<<7,t<b)||(t=r[e+2],n+=(t&D)<<14,t<b)||(t=r[e+3],n+=(t&D)<<21,t<b)||(t=r[e+4],n+=(t&D)*rt,t<b)||(t=r[e+5],n+=(t&D)*nt,t<b)||(t=r[e+6],n+=(t&D)*st,t<b)||(t=r[e+7],n+=(t&D)*ot,t<b))return n;throw new RangeError("Could not decode varint")}function Kn(r,e){let t=r.get(e),n=0;if(n+=t&D,t<b||(t=r.get(e+1),n+=(t&D)<<7,t<b)||(t=r.get(e+2),n+=(t&D)<<14,t<b)||(t=r.get(e+3),n+=(t&D)<<21,t<b)||(t=r.get(e+4),n+=(t&D)*rt,t<b)||(t=r.get(e+5),n+=(t&D)*nt,t<b)||(t=r.get(e+6),n+=(t&D)*st,t<b)||(t=r.get(e+7),n+=(t&D)*ot,t<b))return n;throw new RangeError("Could not decode varint")}function $e(r,e,t=0){return e==null&&(e=kn(q(r))),e instanceof Uint8Array?Jn(r,e,t):Qn(r,e,t)}function ue(r,e=0){return r instanceof Uint8Array?Xn(r,e):Kn(r,e)}function G(r,e){e==null&&(e=r.reduce((s,o)=>s+o.length,0));const t=Gt(e);let n=0;for(const s of r)t.set(s,n),n+=s.length;return t}class Zn{constructor(){d(this,"index",0);d(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,n=e();return n===void 0&&(this.index=t),n}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const t=this.readChar();if(t===e)return t})}readSeparator(e,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,t,n,s){return this.readAtomically(()=>{let o=0,i=0;const a=this.peekChar();if(a===void 0)return;const h=a==="0",g=2**(8*s)-1;for(;;){const f=this.readAtomically(()=>{const C=this.readChar();if(C===void 0)return;const N=Number.parseInt(C,e);if(!Number.isNaN(N))return N});if(f===void 0)break;if(o*=e,o+=f,o>g||(i+=1,t!==void 0&&i>t))return}if(i!==0)return!n&&h&&i>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[t]=n}return e})}readIPv6Addr(){const e=t=>{for(let n=0;n<t.length/2;n++){const s=n*2;if(n<t.length-3){const i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2],t[s+3]=i[3],[s+4,!0]}const o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[s,!1];t[s]=o>>8,t[s+1]=o&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,s]=e(t);if(n===16)return t;if(s||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const o=new Uint8Array(14),i=16-(n+2),[a]=e(o.subarray(0,i));return t.set(o.subarray(0,a),16-a),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Xt=45,Hn=15,Z=new Zn;function Yn(r){if(!(r.length>Hn))return Z.new(r).parseWith(()=>Z.readIPv4Addr())}function es(r){if(r.includes("%")&&(r=r.split("%")[0]),!(r.length>Xt))return Z.new(r).parseWith(()=>Z.readIPv6Addr())}function ts(r){if(r.includes("%")&&(r=r.split("%")[0]),!(r.length>Xt))return Z.new(r).parseWith(()=>Z.readIPAddr())}function Ve(r,e="utf8"){const t=Qt[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}function rs(r){return!!Yn(r)}function ns(r){return!!es(r)}function Kt(r){return!!ts(r)}const yt=rs,ss=ns,Zt=function(r){let e=0;if(r=r.toString().trim(),yt(r)){const t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(ss(r)){const t=r.split(":",8);let n;for(n=0;n<t.length;n++){const o=yt(t[n]);let i;o&&(i=Zt(t[n]),t[n]=F(i.slice(0,2),"base16")),i!=null&&++n<8&&t.splice(n,0,F(i.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}const s=new Uint8Array(e+16);for(n=0;n<t.length;n++){const o=parseInt(t[n],16);s[e++]=o>>8&255,s[e++]=o&255}return s}throw new Error("invalid ip address")},os=function(r,e=0,t){e=~~e,t=t??r.length-e;const n=new DataView(r.buffer);if(t===4){const s=[];for(let o=0;o<t;o++)s.push(r[e+o]);return s.join(".")}if(t===16){const s=[];for(let o=0;o<t;o+=2)s.push(n.getUint16(e+o).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},_=-1,se={},ke={},is=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,_,"ip6zone"],[43,8,"ipcidr"],[53,_,"dns",!0],[54,_,"dns4",!0],[55,_,"dns6",!0],[56,_,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,_,"unix",!1,!0],[421,_,"ipfs"],[421,_,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,_,"garlic64"],[448,0,"tls"],[449,_,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,_,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,_,"http-path"],[777,_,"memory"]];is.forEach(r=>{const e=as(...r);ke[e.code]=e,se[e.name]=e});function as(r,e,t,n,s){return{code:r,size:e,name:t,resolvable:!!n,path:!!s}}function v(r){if(typeof r=="number"){if(ke[r]!=null)return ke[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(se[r]!=null)return se[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}v("ip4");v("ip6");v("ipcidr");function Ht(r,e){switch(v(r).code){case 4:case 41:return us(e);case 42:return Ie(e);case 43:return F(e,"base10");case 6:case 273:case 33:case 132:return Yt(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ie(e);case 421:return fs(e);case 444:return $t(e);case 445:return $t(e);case 466:return ls(e);case 481:return globalThis.encodeURIComponent(Ie(e));default:return F(e,"base16")}}function mt(r,e){switch(v(r).code){case 4:return vt(e);case 41:return vt(e);case 42:return Oe(e);case 43:return Ve(e,"base10");case 6:case 273:case 33:case 132:return it(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Oe(e);case 421:return ds(e);case 444:return ps(e);case 445:return bs(e);case 466:return hs(e);case 481:return Oe(globalThis.decodeURIComponent(e));default:return Ve(e,"base16")}}const Te=Object.values(Re).map(r=>r.decoder),cs=function(){let r=Te[0].or(Te[1]);return Te.slice(2).forEach(e=>r=r.or(e)),r}();function vt(r){if(!Kt(r))throw new Error("invalid ip address");return Zt(r)}function us(r){const e=os(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!Kt(e))throw new Error("invalid ip address");return e}function it(r){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function Yt(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function Oe(r){const e=Ve(r),t=Uint8Array.from($e(e.length));return G([t,e],t.length+e.length)}function Ie(r){const e=ue(r);if(r=r.slice(q(e)),r.length!==e)throw new Error("inconsistent lengths");return F(r)}function ds(r){let e;r[0]==="Q"||r[0]==="1"?e=kt(B.decode(`z${r}`)).bytes:e=qt.parse(r).multihash.bytes;const t=Uint8Array.from($e(e.length));return G([t,e],t.length+e.length)}function hs(r){const e=cs.decode(r),t=Uint8Array.from($e(e.length));return G([t,e],t.length+e.length)}function ls(r){const e=ue(r),t=r.slice(q(e));if(t.length!==e)throw new Error("inconsistent lengths");return"u"+F(t,"base64url")}function fs(r){const e=ue(r),t=r.slice(q(e));if(t.length!==e)throw new Error("inconsistent lengths");return F(t,"base58btc")}function ps(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const t=W.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=it(n);return G([t,s],t.length+s.length)}function bs(r){const e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const t=W.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=it(n);return G([t,s],t.length+s.length)}function $t(r){const e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=F(e,"base32"),s=Yt(t);return`${n}:${s}`}function ws(r){r=qe(r);const e=[],t=[];let n=null;const s=r.split("/").slice(1);if(s.length===1&&s[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<s.length;o++){const i=s[o],a=v(i);if(a.size===0){e.push([a.code]),t.push([a.code]);continue}if(o++,o>=s.length)throw rr("invalid address: "+r);if(a.path===!0){n=qe(s.slice(o).join("/")),e.push([a.code,mt(a.code,n)]),t.push([a.code,n]);break}const h=mt(a.code,s[o]);e.push([a.code,h]),t.push([a.code,Ht(a.code,h)])}return{string:er(t),bytes:tr(e),tuples:e,stringTuples:t,path:n}}function xt(r){const e=[],t=[];let n=null,s=0;for(;s<r.length;){const o=ue(r,s),i=q(o),a=v(o),h=gs(a,r.slice(s+i));if(h===0){e.push([o]),t.push([o]),s+=i;continue}const g=r.slice(s+i,s+i+h);if(s+=h+i,s>r.length)throw rr("Invalid address Uint8Array: "+F(r,"base16"));e.push([o,g]);const f=Ht(o,g);if(t.push([o,f]),a.path===!0){n=f;break}}return{bytes:Uint8Array.from(r),string:er(t),tuples:e,stringTuples:t,path:n}}function er(r){const e=[];return r.map(t=>{const n=v(t[0]);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),qe(e.join("/"))}function tr(r){return G(r.map(e=>{const t=v(e[0]);let n=Uint8Array.from($e(t.code));return e.length>1&&e[1]!=null&&(n=G([n,e[1]])),n}))}function gs(r,e){if(r.size>0)return r.size/8;if(r.size===0)return 0;{const t=ue(e instanceof Uint8Array?e:Uint8Array.from(e));return t+q(t)}}function qe(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function rr(r){return new Error("Error parsing address: "+r)}const ys=Symbol.for("nodejs.util.inspect.custom"),nr=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ms=[v("dns").code,v("dns4").code,v("dns6").code,v("dnsaddr").code];class vs extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}var jt,K,V,ie,ae;const Q=class Q{constructor(e){d(this,"bytes");Y(this,K);Y(this,V);Y(this,ie);Y(this,ae);d(this,jt,!0);e==null&&(e="");let t;if(e instanceof Uint8Array)t=xt(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);t=ws(e)}else if(xs(e))t=xt(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=t.bytes,ee(this,K,t.string),ee(this,V,t.tuples),ee(this,ie,t.stringTuples),ee(this,ae,t.path)}toString(){return R(this,K)}toJSON(){return this.toString()}toOptions(){let e,t,n,s,o="";const i=v("tcp"),a=v("udp"),h=v("ip4"),g=v("ip6"),f=v("dns6"),C=v("ip6zone");for(const[O,c]of this.stringTuples())O===C.code&&(o=`%${c??""}`),ms.includes(O)&&(t=i.name,s=443,n=`${c??""}${o}`,e=O===f.code?6:4),(O===i.code||O===a.code)&&(t=v(O).name,s=parseInt(c??"")),(O===h.code||O===g.code)&&(t=v(O).name,n=`${c??""}${o}`,e=O===g.code?6:4);if(e==null||t==null||n==null||s==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:s}}protos(){return R(this,V).map(([e])=>Object.assign({},v(e)))}protoCodes(){return R(this,V).map(([e])=>e)}protoNames(){return R(this,V).map(([e])=>v(e).name)}tuples(){return R(this,V).map(([e,t])=>t==null?[e]:[e,t])}stringTuples(){return R(this,ie).map(([e,t])=>t==null?[e]:[e,t])}encapsulate(e){return e=new Q(e),new Q(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),s=n.lastIndexOf(t);if(s<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Q(n.slice(0,s))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Q(tr(t.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,s])=>{n===se.p2p.code&&e.push([n,s]),n===se["p2p-circuit"].code&&(e=[])});const t=e.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?F(B.decode(`z${n}`),"base58btc"):F(qt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return R(this,ae)}equals(e){return vn(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find(o=>o.resolvable);if(t==null)return[this];const n=$s.get(t.name);if(n==null)throw new vs(`no available resolver for ${t.name}`);return(await n(this,e)).map(o=>xe(o))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(jt=nr,ys)](){return`Multiaddr(${R(this,K)})`}};K=new WeakMap,V=new WeakMap,ie=new WeakMap,ae=new WeakMap;let We=Q;const $s=new Map;function xs(r){return!!(r!=null&&r[nr])}function xe(r){return new We(r)}const Ss=u("dns4"),Es=u("dns6"),Cs=u("dnsaddr"),J=U(u("dns"),Cs,Ss,Es),Se=U(u("ip4"),u("ip6")),H=U(l(Se,u("tcp")),l(J,u("tcp"))),Ee=l(Se,u("udp")),As=l(Ee,u("utp")),Us=l(Ee,u("quic")),Ps=l(Ee,u("quic-v1")),Ge=U(l(H,u("ws")),l(J,u("ws"))),St=U(l(Ge,u("p2p")),Ge),Je=U(l(H,u("wss")),l(J,u("wss")),l(H,u("tls"),u("ws")),l(J,u("tls"),u("ws"))),Et=U(l(Je,u("p2p")),Je),Qe=U(l(H,u("http")),l(Se,u("http")),l(J,u("http"))),Xe=U(l(H,u("https")),l(Se,u("https")),l(J,u("https"))),Ct=l(Ee,u("webrtc-direct"),u("certhash")),sr=U(l(Ct,u("p2p")),Ct),At=l(Ps,u("webtransport"),u("certhash"),u("certhash")),or=U(l(At,u("p2p")),At),ir=U(l(St,u("p2p-webrtc-star"),u("p2p")),l(Et,u("p2p-webrtc-star"),u("p2p")),l(St,u("p2p-webrtc-star")),l(Et,u("p2p-webrtc-star"))),ar=U(l(Qe,u("p2p-webrtc-direct"),u("p2p")),l(Xe,u("p2p-webrtc-direct"),u("p2p")),l(Qe,u("p2p-webrtc-direct")),l(Xe,u("p2p-webrtc-direct"))),Ke=U(Ge,Je,Qe,Xe,ir,ar,H,As,Us,J,sr,or),k=U(l(Ke,u("p2p")),ir,ar,sr,or,u("p2p")),Ut=U(l(k,u("p2p-circuit"),k),l(k,u("p2p-circuit")),l(u("p2p-circuit"),k),l(Ke,u("p2p-circuit")),l(u("p2p-circuit"),Ke),u("p2p-circuit")),cr=()=>U(l(Ut,cr),Ut),re=cr(),zs=U(l(re,k,re),l(k,re),l(re,k),re,k);function ur(r){function e(t){let n;try{n=xe(t)}catch{return!1}const s=r(n.protoNames());return s===null?!1:s===!0||s===!1?s:s.length===0}return e}function l(...r){function e(t){if(t.length<r.length)return null;let n=t;return r.some(s=>(n=typeof s=="function"?s().partialMatch(t):s.partialMatch(t),Array.isArray(n)&&(t=n),n===null)),n}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:ur(e),partialMatch:e}}function U(...r){function e(n){let s=null;return r.some(o=>{const i=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return i!=null?(s=i,!0):!1}),s}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:ur(e),partialMatch:e}}function u(r){const e=r;function t(s){let o;try{o=xe(s)}catch{return!1}const i=o.protoNames();return i.length===1&&i[0]===e}function n(s){return s.length===0?null:s[0]===e?s.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:n}}var De,Pt;function dr(){if(Pt)return De;Pt=1;const r=typeof navigator<"u"&&navigator.product==="ReactNative";function e(){return r?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const t=self.URL,n=e();class s{constructor(a="",h=n){this.super=new t(a,h),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(a){this.super.hash=a}set host(a){this.super.host=a}set hostname(a){this.super.hostname=a}set href(a){this.super.href=a}set password(a){this.super.password=a}set pathname(a){this.super.pathname=a}set port(a){this.super.port=a}set protocol(a){this.super.protocol=a}set search(a){this.super.search=a}set username(a){this.super.username=a}static createObjectURL(a){return t.createObjectURL(a)}static revokeObjectURL(a){t.revokeObjectURL(a)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function o(i){if(typeof i=="string")return new t(i).toString();if(!(i instanceof t)){const a=i.username&&i.password?`${i.username}:${i.password}@`:"",h=i.auth?i.auth+"@":"",g=i.port?":"+i.port:"",f=i.protocol?i.protocol+"//":"",C=i.host||"",N=i.hostname||"",O=i.search||(i.query?"?"+i.query:""),c=i.hash||"",p=i.pathname||"",P=i.path||p+O;return`${f}${a||h}${C||N+g}${P}${c}`}}return De={URLWithLegacySupport:s,URLSearchParams:self.URLSearchParams,defaultBase:n,format:o},De}var Ne,zt;function Ms(){if(zt)return Ne;zt=1;const{URLWithLegacySupport:r,format:e}=dr();return Ne=(t,n={},s={},o)=>{let i=n.protocol?n.protocol.replace(":",""):"http";i=(s[i]||o||i)+":";let a;try{a=new r(t)}catch{a={}}const h=Object.assign({},n,{protocol:i||a.protocol,host:n.host||a.host});return new r(t,e(h)).toString()},Ne}var _e,Mt;function Ts(){if(Mt)return _e;Mt=1;const{URLWithLegacySupport:r,format:e,URLSearchParams:t,defaultBase:n}=dr(),s=Ms();return _e={URL:r,URLSearchParams:t,format:e,relative:s,defaultBase:n},_e}var Os=Ts();function Is(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function at(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function Ds(r){return new TextEncoder().encode(r)}function Ns(r){return new TextDecoder().decode(r)}function _s(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=s}var a=r.length,h=r.charAt(0),g=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function C(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";for(var p=0,P=0,y=0,$=c.length;y!==$&&c[y]===0;)y++,p++;for(var x=($-y)*f+1>>>0,w=new Uint8Array(x);y!==$;){for(var S=c[y],z=0,m=x-1;(S!==0||z<P)&&m!==-1;m--,z++)S+=256*w[m]>>>0,w[m]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");P=z,y++}for(var A=x-P;A!==x&&w[A]===0;)A++;for(var L=h.repeat(p);A<x;++A)L+=r.charAt(w[A]);return L}function N(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;var p=0;if(c[p]!==" "){for(var P=0,y=0;c[p]===h;)P++,p++;for(var $=(c.length-p)*g+1>>>0,x=new Uint8Array($);c[p];){var w=t[c.charCodeAt(p)];if(w===255)return;for(var S=0,z=$-1;(w!==0||S<y)&&z!==-1;z--,S++)w+=a*x[z]>>>0,x[z]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=S,p++}if(c[p]!==" "){for(var m=$-y;m!==$&&x[m]===0;)m++;for(var A=new Uint8Array(P+($-m)),L=P;m!==$;)A[L++]=x[m++];return A}}}function O(c){var p=N(c);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:C,decodeUnsafe:N,decode:O}}var Bs=_s,Fs=Bs;class js{constructor(e,t,n){d(this,"name");d(this,"prefix");d(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ls{constructor(e,t,n){d(this,"name");d(this,"prefix");d(this,"baseDecode");d(this,"prefixCodePoint");this.name=e,this.prefix=t;const s=t.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hr(this,e)}}class Rs{constructor(e){d(this,"decoders");this.decoders=e}or(e){return hr(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function hr(r,e){return new Rs({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}class Vs{constructor(e,t,n,s){d(this,"name");d(this,"prefix");d(this,"baseEncode");d(this,"baseDecode");d(this,"encoder");d(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new js(e,t,n),this.decoder=new Ls(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function Ce({name:r,prefix:e,encode:t,decode:n}){return new Vs(r,e,t,n)}function de({name:r,prefix:e,alphabet:t}){const{encode:n,decode:s}=Fs(t,r);return Ce({prefix:e,name:r,encode:n,decode:o=>at(s(o))})}function ks(r,e,t,n){const s={};for(let f=0;f<e.length;++f)s[e[f]]=f;let o=r.length;for(;r[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,h=0,g=0;for(let f=0;f<o;++f){const C=s[r[f]];if(C===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<t|C,a+=t,a>=8&&(a-=8,i[g++]=255&h>>a)}if(a>=t||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return i}function qs(r,e,t){const n=e[e.length-1]==="=",s=(1<<t)-1;let o="",i=0,a=0;for(let h=0;h<r.length;++h)for(a=a<<8|r[h],i+=8;i>t;)i-=t,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<t-i]),n)for(;o.length*t&7;)o+="=";return o}function T({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return Ce({prefix:e,name:r,encode(s){return qs(s,n,t)},decode(s){return ks(s,n,t,r)}})}const X=T({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ws=T({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gs=T({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Js=T({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qs=T({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xs=T({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ks=T({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zs=T({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hs=T({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ys=Object.freeze(Object.defineProperty({__proto__:null,base32:X,base32hex:Qs,base32hexpad:Ks,base32hexpadupper:Zs,base32hexupper:Xs,base32pad:Gs,base32padupper:Js,base32upper:Ws,base32z:Hs},Symbol.toStringTag,{value:"Module"})),j=de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eo=de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),to=Object.freeze(Object.defineProperty({__proto__:null,base58btc:j,base58flickr:eo},Symbol.toStringTag,{value:"Module"})),fe=de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ro=de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),no=Object.freeze(Object.defineProperty({__proto__:null,base36:fe,base36upper:ro},Symbol.toStringTag,{value:"Module"}));var so=lr,Tt=128,oo=-128,io=Math.pow(2,31);function lr(r,e,t){e=e||[],t=t||0;for(var n=t;r>=io;)e[t++]=r&255|Tt,r/=128;for(;r&oo;)e[t++]=r&255|Tt,r>>>=7;return e[t]=r|0,lr.bytes=t-n+1,e}var ao=Ze,co=128,Ot=127;function Ze(r,n){var t=0,n=n||0,s=0,o=n,i,a=r.length;do{if(o>=a)throw Ze.bytes=0,new RangeError("Could not decode varint");i=r[o++],t+=s<28?(i&Ot)<<s:(i&Ot)*Math.pow(2,s),s+=7}while(i>=co);return Ze.bytes=o-n,t}var uo=Math.pow(2,7),ho=Math.pow(2,14),lo=Math.pow(2,21),fo=Math.pow(2,28),po=Math.pow(2,35),bo=Math.pow(2,42),wo=Math.pow(2,49),go=Math.pow(2,56),yo=Math.pow(2,63),mo=function(r){return r<uo?1:r<ho?2:r<lo?3:r<fo?4:r<po?5:r<bo?6:r<wo?7:r<go?8:r<yo?9:10},vo={encode:so,decode:ao,encodingLength:mo},ge=vo;function He(r,e=0){return[ge.decode(r,e),ge.decode.bytes]}function ye(r,e,t=0){return ge.encode(r,e,t),e}function me(r){return ge.encodingLength(r)}function $o(r,e){const t=e.byteLength,n=me(r),s=n+me(t),o=new Uint8Array(s+t);return ye(r,o,0),ye(t,o,n),o.set(e,s),new ct(r,t,e,o)}function fr(r){const e=at(r),[t,n]=He(e),[s,o]=He(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new ct(t,s,i,e)}function xo(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Is(r.bytes,t.bytes)}}class ct{constructor(e,t,n,s){d(this,"code");d(this,"size");d(this,"digest");d(this,"bytes");this.code=e,this.size=t,this.digest=n,this.bytes=s}}function It(r,e){const{bytes:t,version:n}=r;switch(n){case 0:return Eo(t,Ye(r),e??j.encoder);default:return Co(t,Ye(r),e??X.encoder)}}const Dt=new WeakMap;function Ye(r){const e=Dt.get(r);if(e==null){const t=new Map;return Dt.set(r,t),t}return e}var Lt;class E{constructor(e,t,n,s){d(this,"code");d(this,"version");d(this,"multihash");d(this,"bytes");d(this,"/");d(this,Lt,"CID");this.code=t,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==ne)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Ao)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return E.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=$o(e,t);return E.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return E.equals(this,e)}static equals(e,t){const n=t;return n!=null&&e.code===n.code&&e.version===n.version&&xo(e.multihash,n.multihash)}toString(e){return It(this,e)}toJSON(){return{"/":It(this)}}link(){return this}[(Lt=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof E)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:s,multihash:o,bytes:i}=t;return new E(n,s,o,i??Nt(n,s,o.bytes))}else if(t[Uo]===!0){const{version:n,multihash:s,code:o}=t,i=fr(s);return E.create(n,o,i)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==ne)throw new Error(`Version 0 CID must use dag-pb (code: ${ne}) block encoding`);return new E(e,t,n,n.bytes)}case 1:{const s=Nt(e,t,n.bytes);return new E(e,t,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return E.create(0,ne,e)}static createV1(e,t){return E.create(1,e,t)}static decode(e){const[t,n]=E.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=E.inspectBytes(e),n=t.size-t.multihashSize,s=at(e.subarray(n,n+t.multihashSize));if(s.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=s.subarray(t.multihashSize-t.digestSize),i=new ct(t.multihashCode,t.digestSize,o,s);return[t.version===0?E.createV0(i):E.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[C,N]=He(e.subarray(t));return t+=N,C};let s=n(),o=ne;if(s===18?(s=0,t=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=t,a=n(),h=n(),g=t+h,f=g-i;return{version:s,codec:o,multihashCode:a,digestSize:h,multihashSize:f,size:g}}static parse(e,t){const[n,s]=So(e,t),o=E.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ye(o).set(n,e),o}}function So(r,e){switch(r[0]){case"Q":{const t=e??j;return[j.prefix,t.decode(`${j.prefix}${r}`)]}case j.prefix:{const t=e??j;return[j.prefix,t.decode(r)]}case X.prefix:{const t=e??X;return[X.prefix,t.decode(r)]}case fe.prefix:{const t=e??fe;return[fe.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function Eo(r,e,t){const{prefix:n}=t;if(n!==j.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const s=e.get(n);if(s==null){const o=t.encode(r).slice(1);return e.set(n,o),o}else return s}function Co(r,e,t){const{prefix:n}=t,s=e.get(n);if(s==null){const o=t.encode(r);return e.set(n,o),o}else return s}const ne=112,Ao=18;function Nt(r,e,t){const n=me(r),s=n+me(e),o=new Uint8Array(s+t.byteLength);return ye(r,o,0),ye(e,o,n),o.set(t,s),o}const Uo=Symbol.for("@ipld/js-cid/CID"),Po=de({prefix:"9",name:"base10",alphabet:"0123456789"}),zo=Object.freeze(Object.defineProperty({__proto__:null,base10:Po},Symbol.toStringTag,{value:"Module"})),Mo=T({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),To=T({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Oo=Object.freeze(Object.defineProperty({__proto__:null,base16:Mo,base16upper:To},Symbol.toStringTag,{value:"Module"})),Io=T({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Do=Object.freeze(Object.defineProperty({__proto__:null,base2:Io},Symbol.toStringTag,{value:"Module"})),pr=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),No=pr.reduce((r,e,t)=>(r[t]=e,r),[]),_o=pr.reduce((r,e,t)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return r[n]=t,r},[]);function Bo(r){return r.reduce((e,t)=>(e+=No[t],e),"")}function Fo(r){const e=[];for(const t of r){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const s=_o[n];if(s==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const jo=Ce({prefix:"🚀",name:"base256emoji",encode:Bo,decode:Fo}),Lo=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:jo},Symbol.toStringTag,{value:"Module"})),Ro=T({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vo=T({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ko=T({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qo=T({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Wo=Object.freeze(Object.defineProperty({__proto__:null,base64:Ro,base64pad:Vo,base64url:ko,base64urlpad:qo},Symbol.toStringTag,{value:"Module"})),Go=T({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Jo=Object.freeze(Object.defineProperty({__proto__:null,base8:Go},Symbol.toStringTag,{value:"Module"})),Qo=Ce({prefix:"\0",name:"identity",encode:r=>Ns(r),decode:r=>Ds(r)}),Xo=Object.freeze(Object.defineProperty({__proto__:null,identity:Qo},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const _t={...Xo,...Do,...Jo,...zo,...Oo,...Ys,...no,...to,...Wo,...Lo};function Ko(r=0){return new Uint8Array(r)}function br(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const Bt=br("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Be=br("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Ko(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Zo={utf8:Bt,"utf-8":Bt,hex:_t.base16,latin1:Be,ascii:Be,binary:Be,..._t};function Ho(r,e="utf8"){const t=Zo[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.encoder.encode(r).substring(1)}const wr=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,oe=/^\/(ip[fn]s)\/([^/?#]+)/,gr=1,yr=2,Ae=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,mr=1,vr=2,Yo=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function fi(r){const e=ut(r);if(e===!1)return!1;try{fr(j.decode(`z${e}`))}catch{return!1}return!0}function ei(r){try{return!!xe(r)}catch{return!1}}function ti(r){try{let e;if(ze(r)?e=E.parse(r):e=E.asCID(r),e==null)return!1;X.decode(e.toString())}catch{return!1}return!0}function Ue(r){try{return ze(r)?!!E.parse(r):r instanceof Uint8Array?!!E.decode(r):!!E.asCID(r)}catch{return!1}}function pi(r){return ei(r)&&zs.matches(r)}function he(r,e,t=gr,n=yr){const s=ut(r);if(s===!1)return!1;const o=s.match(e);if(o==null||o[t]!=="ipfs")return!1;let i=o[n];return i!=null&&e===Ae&&(i=i.toLowerCase()),Ue(i)}function Pe(r,e,t=gr,n=yr){const s=ut(r);if(s===!1)return!1;const o=s.match(e);if(o==null||o[t]!=="ipns")return!1;let i=o[n];if(i!=null&&e===Ae){if(i=i.toLowerCase(),Ue(i))return!0;try{!i.includes(".")&&i.includes("-")&&(i=i.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:a}=new Os.URL(`http://${i}`);return Yo.test(a)}catch{return!1}}return!0}function ze(r){return typeof r=="string"}function ut(r){return r instanceof Uint8Array?Ho(r,"base58btc"):ze(r)?r:!1}const $r=r=>he(r,Ae,vr,mr),xr=r=>Pe(r,Ae,vr,mr),ri=r=>$r(r)||xr(r),ni=r=>he(r,wr)||$r(r),si=r=>Pe(r,wr)||xr(r),oi=r=>ni(r)||si(r)||ri(r),ii=r=>he(r,oe)||Pe(r,oe),bi=r=>Ue(r)&&ti(r),wi=r=>he(r,oe),gi=r=>Pe(r,oe),yi=r=>oi(r)||ii(r),mi=r=>ze(r)&&!Ue(r)&&he(`/ipfs/${r}`,oe);export{bi as base32cid,Ue as cid,mi as cidPath,wi as ipfsPath,$r as ipfsSubdomain,ni as ipfsUrl,gi as ipnsPath,xr as ipnsSubdomain,si as ipnsUrl,ei as multiaddr,fi as multihash,ii as path,wr as pathGatewayPattern,oe as pathPattern,pi as peerMultiaddr,ri as subdomain,Ae as subdomainGatewayPattern,oi as url,yi as urlOrPath};
